<html lang="en">
<head>
<title>Passphrase Callback - The `GnuPG Made Easy' Reference Manual</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="The `GnuPG Made Easy' Reference Manual">
<meta name="generator" content="makeinfo 4.11">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Context-Attributes.html#Context-Attributes" title="Context Attributes">
<link rel="prev" href="Key-Listing-Mode.html#Key-Listing-Mode" title="Key Listing Mode">
<link rel="next" href="Progress-Meter-Callback.html#Progress-Meter-Callback" title="Progress Meter Callback">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<p>
<a name="Passphrase-Callback"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="Progress-Meter-Callback.html#Progress-Meter-Callback">Progress Meter Callback</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Key-Listing-Mode.html#Key-Listing-Mode">Key Listing Mode</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Context-Attributes.html#Context-Attributes">Context Attributes</a>
<hr>
</div>

<h4 class="subsection">7.3.7 Passphrase Callback</h4>

<p><a name="index-callback_002c-passphrase-158"></a><a name="index-passphrase-callback-159"></a>

<div class="defun">
&mdash; Data type: <b>gpgme_error_t (*gpgme_passphrase_cb_t)(void *</b><var>hook</var><b>, const char *</b><var>uid_hint</var><b>, const char *</b><var>passphrase_info</var><b>, int&nbsp;</b><var>prev_was_bad</var><b><!-- /@w -->, int&nbsp;</b><var>fd</var><b><!-- /@w -->)</b><var><a name="index-gpgme_005ferror_005ft-_0028_002agpgme_005fpassphrase_005fcb_005ft_0029_0028void-_002a_0040var_007bhook_007d_002c-const-char-_002a_0040var_007buid_005fhint_007d_002c-const-char-_002a_0040var_007bpassphrase_005finfo_007d_002c-_0040w_007bint-_0040var_007bprev_005fwas_005fbad_007d_007d_002c-_0040w_007bint-_0040var_007bfd_007d_007d_0029-160"></a></var><br>
<blockquote><p><a name="index-gpgme_005fpassphrase_005fcb_005ft-161"></a>The <code>gpgme_passphrase_cb_t</code> type is the type of functions usable as
passphrase callback function.

        <p>The argument <var>uid_hint</var> might contain a string that gives an
indication for which user ID the passphrase is required.  If this is
not available, or not applicable (in the case of symmetric encryption,
for example), <var>uid_hint</var> will be <code>NULL</code>.

        <p>The argument <var>passphrase_info</var>, if not <code>NULL</code>, will give
further information about the context in which the passphrase is
required.  This information is engine and operation specific.

        <p>If this is the repeated attempt to get the passphrase, because
previous attempts failed, then <var>prev_was_bad</var> is 1, otherwise it
will be 0.

        <p>The user must write the passphrase, followed by a newline character,
to the file descriptor <var>fd</var>.  If the user returns 0 indicating
success, the user must at least write a newline character before
returning from the callback.

        <p>If an error occurs, return the corresponding <code>gpgme_error_t</code>
value.  You can use the error code <code>GPG_ERR_CANCELED</code> to abort
the operation.  Otherwise, return <code>0</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>gpgme_set_passphrase_cb</b> (<var>gpgme_ctx_t&nbsp;ctx<!-- /@w -->, gpgme_passphrase_cb_t&nbsp;passfunc<!-- /@w -->, void&nbsp;*hook_value<!-- /@w --></var>)<var><a name="index-gpgme_005fset_005fpassphrase_005fcb-162"></a></var><br>
<blockquote><p>The function <code>gpgme_set_passphrase_cb</code> sets the function that is
used when a passphrase needs to be provided by the user to
<var>passfunc</var>.  The function <var>passfunc</var> needs to implemented by
the user, and whenever it is called, it is called with its first
argument being <var>hook_value</var>.  By default, no passphrase callback
function is set.

        <p>Not all crypto engines require this callback to retrieve the
passphrase.  It is better if the engine retrieves the passphrase from
a trusted agent (a daemon process), rather than having each user to
implement their own passphrase query.  Some engines do not even
support an external passphrase callback at all, in this case the error
code <code>GPG_ERR_NOT_SUPPORTED</code> is returned.

        <p>The user can disable the use of a passphrase callback function by
calling <code>gpgme_set_passphrase_cb</code> with <var>passfunc</var> being
<code>NULL</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>gpgme_get_passphrase_cb</b> (<var>gpgme_ctx_t&nbsp;ctx<!-- /@w -->, gpgme_passphrase_cb_t&nbsp;*passfunc<!-- /@w -->, void&nbsp;**hook_value<!-- /@w --></var>)<var><a name="index-gpgme_005fget_005fpassphrase_005fcb-163"></a></var><br>
<blockquote><p>The function <code>gpgme_get_passphrase_cb</code> returns the function that
is used when a passphrase needs to be provided by the user in
<var>*passfunc</var>, and the first argument for this function in
<var>*hook_value</var>.  If no passphrase callback is set, or <var>ctx</var> is
not a valid pointer, <code>NULL</code> is returned in both variables.

        <p><var>passfunc</var> or <var>hook_value</var> can be <code>NULL</code>.  In this case,
the corresponding value will not be returned. 
</p></blockquote></div>

   </body></html>

