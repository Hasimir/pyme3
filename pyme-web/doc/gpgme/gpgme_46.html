<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/html40/loose.dtd">
<HTML>
<!-- Created on June, 7 2005 by texi2html 1.66 -->
<!--
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people <dev@texi2html.cvshome.org>
Send bugs and suggestions to <users@texi2html.cvshome.org>

-->
<HEAD>
<TITLE>The `GnuPG Made Easy' Reference Manual: Key Management</TITLE>

<META NAME="description" CONTENT="The `GnuPG Made Easy' Reference Manual: Key Management">
<META NAME="keywords" CONTENT="The `GnuPG Made Easy' Reference Manual: Key Management">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.66">

</HEAD>

<BODY LANG="en" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<A NAME="SEC46"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme_45.html#SEC45"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme_47.html#SEC47"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme_34.html#SEC34"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme_34.html#SEC34"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme_78.html#SEC78"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme_81.html#SEC81">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<HR SIZE=1>
<H2> 7.4 Key Management </H2>
<!--docid::SEC46::-->
<P>

Some of the cryptographic operations require that recipients or
signers are specified.  This is always done by specifying the
respective keys that should be used for the operation.  The following
section describes how such keys can be selected and manipulated.
</P>
<P>

<A NAME="IDX82"></A>
</P>
<DL>
<DT><U>Data type:</U> <B>gpgme_sub_key_t</B>
<DD>The <CODE>gpgme_sub_key_t</CODE> type is a pointer to a subkey structure.
Sub keys are one component of a <CODE>gpgme_key_t</CODE> object.  In fact,
subkeys are those parts that contains the real information about the
individual cryptographic keys that belong to the same key object.  One
<CODE>gpgme_key_t</CODE> can contain several subkeys.  The first subkey in
the linked list is also called the primary key.
<P>

The subkey structure has the following members:
</P>
<P>

</P>
<DL COMPACT>
<DT><CODE>gpgme_sub_key_t next</CODE>
<DD>This is a pointer to the next subkey structure in the linked list, or
<CODE>NULL</CODE> if this is the last element.
<P>

</P>
<DT><CODE>unsigned int revoked : 1</CODE>
<DD>This is true if the subkey is revoked.
<P>

</P>
<DT><CODE>unsigned int expired : 1</CODE>
<DD>This is true if the subkey is expired.
<P>

</P>
<DT><CODE>unsigned int disabled : 1</CODE>
<DD>This is true if the subkey is disabled.
<P>

</P>
<DT><CODE>unsigned int invalid : 1</CODE>
<DD>This is true if the subkey is invalid.
<P>

</P>
<DT><CODE>unsigned int can_encrypt : 1</CODE>
<DD>This is true if the subkey can be used for encryption.
<P>

</P>
<DT><CODE>unsigned int can_sign : 1</CODE>
<DD>This is true if the subkey can be used to create data signatures.
<P>

</P>
<DT><CODE>unsigned int can_certify : 1</CODE>
<DD>This is true if the subkey can be used to create key certificates.
<P>

</P>
<DT><CODE>unsigned int can_authenticate : 1</CODE>
<DD>This is true if the subkey can be used for authentication.
<P>

</P>
<DT><CODE>unsigned int secret : 1</CODE>
<DD>This is true if the subkey is a secret key.
<P>

</P>
<DT><CODE>gpgme_pubkey_algo_t pubkey_algo</CODE>
<DD>This is the public key algorithm supported by this subkey.
<P>

</P>
<DT><CODE>unsigned int length</CODE>
<DD>This is the length of the subkey (in bits).
<P>

</P>
<DT><CODE>char *keyid</CODE>
<DD>This is the key ID of the subkey in hexadecimal digits.
<P>

</P>
<DT><CODE>char *fpr</CODE>
<DD>This is the fingerprint of the subkey in hexadecimal digits, if
available.  This is usually only available for the primary key.
<P>

</P>
<DT><CODE>long int timestamp</CODE>
<DD>This is the creation timestamp of the subkey.  This is -1 if the
timestamp is invalid, and 0 if it is not available.
<P>

</P>
<DT><CODE>long int expires</CODE>
<DD>This is the expiration timestamp of the subkey, or 0 if the subkey
does not expire.
</DL>
</DL>
<P>

<A NAME="IDX83"></A>
</P>
<DL>
<DT><U>Data type:</U> <B>gpgme_key_sig_t</B>
<DD>The <CODE>gpgme_key_sig_t</CODE> type is a pointer to a key signature structure.
Key signatures are one component of a <CODE>gpgme_key_t</CODE> object, and
validate user IDs on the key.
<P>

The signatures on a key are only available if the key was retrieved
via a listing operation with the <CODE>GPGME_KEYLIST_MODE_SIGS</CODE> mode
enabled, because it is expensive to retrieve all signatures of a key.
</P>
<P>

The key signature structure has the following members:
</P>
<P>

</P>
<DL COMPACT>
<DT><CODE>gpgme_key_sig_t next</CODE>
<DD>This is a pointer to the next key signature structure in the linked
list, or <CODE>NULL</CODE> if this is the last element.
<P>

</P>
<DT><CODE>unsigned int revoked : 1</CODE>
<DD>This is true if the key signature is a revocation signature.
<P>

</P>
<DT><CODE>unsigned int expired : 1</CODE>
<DD>This is true if the key signature is expired.
<P>

</P>
<DT><CODE>unsigned int invalid : 1</CODE>
<DD>This is true if the key signature is invalid.
<P>

</P>
<DT><CODE>unsigned int exportable : 1</CODE>
<DD>This is true if the key signature is exportable.
<P>

</P>
<DT><CODE>gpgme_pubkey_algo_t pubkey_algo</CODE>
<DD>This is the public key algorithm used to create the signature.
<P>

</P>
<DT><CODE>char *keyid</CODE>
<DD>This is the key ID of the key (in hexadecimal digits) used to create
the signature.
<P>

</P>
<DT><CODE>long int timestamp</CODE>
<DD>This is the creation timestamp of the key signature.  This is -1 if
the timestamp is invalid, and 0 if it is not available.
<P>

</P>
<DT><CODE>long int expires</CODE>
<DD>This is the expiration timestamp of the key signature, or 0 if the key
signature does not expire.
<P>

</P>
<DT><CODE>gpgme_error_t status</CODE>
<DD>This is the status of the signature and has the same meaning as the
member of the same name in a <CODE>gpgme_signature_t</CODE> object.
<P>

</P>
<DT><CODE>unsigned int sig_class</CODE>
<DD>This specifies the signature class of the key signature.  The meaning
is specific to the crypto engine.
<P>

</P>
<DT><CODE>char *uid</CODE>
<DD>This is the main user ID of the key used to create the signature.
<P>

</P>
<DT><CODE>char *name</CODE>
<DD>This is the name component of <CODE>uid</CODE>, if available.
<P>

</P>
<DT><CODE>char *comment</CODE>
<DD>This is the comment component of <CODE>uid</CODE>, if available.
<P>

</P>
<DT><CODE>char *email</CODE>
<DD>This is the email component of <CODE>uid</CODE>, if available.
</DL>
</DL>
<P>

<A NAME="IDX84"></A>
</P>
<DL>
<DT><U>Data type:</U> <B>gpgme_user_id_t</B>
<DD>A user ID is a component of a <CODE>gpgme_key_t</CODE> object.  One key can
have many user IDs.  The first one in the list is the main (or
primary) user ID.
<P>

The user ID structure has the following members.
</P>
<P>

</P>
<DL COMPACT>
<DT><CODE>gpgme_user_id_t next</CODE>
<DD>This is a pointer to the next user ID structure in the linked list, or
<CODE>NULL</CODE> if this is the last element.
<P>

</P>
<DT><CODE>unsigned int revoked : 1</CODE>
<DD>This is true if the user ID is revoked.
<P>

</P>
<DT><CODE>unsigned int invalid : 1</CODE>
<DD>This is true if the user ID is invalid.
<P>

</P>
<DT><CODE>gpgme_validity_t validity</CODE>
<DD>This specifies the validity of the user ID.
<P>

</P>
<DT><CODE>char *uid</CODE>
<DD>This is the user ID string.
<P>

</P>
<DT><CODE>char *name</CODE>
<DD>This is the name component of <CODE>uid</CODE>, if available.
<P>

</P>
<DT><CODE>char *comment</CODE>
<DD>This is the comment component of <CODE>uid</CODE>, if available.
<P>

</P>
<DT><CODE>char *email</CODE>
<DD>This is the email component of <CODE>uid</CODE>, if available.
<P>

</P>
<DT><CODE>gpgme_key_sig_t signatures</CODE>
<DD>This is a linked list with the signatures on this user ID.
</DL>
</DL>
<P>

<A NAME="IDX85"></A>
</P>
<DL>
<DT><U>Data type:</U> <B>gpgme_key_t</B>
<DD>The <CODE>gpgme_key_t</CODE> type is a pointer to a key object.  It has the
following members:
<P>

</P>
<DL COMPACT>
<DT><CODE>gpgme_keylist_mode_t keylist_mode</CODE>
<DD>The keylist mode that was active when the key was retrieved.
<P>

</P>
<DT><CODE>unsigned int revoked : 1</CODE>
<DD>This is true if the key is revoked.
<P>

</P>
<DT><CODE>unsigned int expired : 1</CODE>
<DD>This is true if the key is expired.
<P>

</P>
<DT><CODE>unsigned int disabled : 1</CODE>
<DD>This is true if the key is disabled.
<P>

</P>
<DT><CODE>unsigned int invalid : 1</CODE>
<DD>This is true if the key is invalid. This might have several reasons,
for a example for the S/MIME backend, it will be set in during key
listsing if the key could not be validated due to a missing
certificates or unmatched policies.
<P>

</P>
<DT><CODE>unsigned int can_encrypt : 1</CODE>
<DD>This is true if the key (ie one of its subkeys) can be used for
encryption.
<P>

</P>
<DT><CODE>unsigned int can_sign : 1</CODE>
<DD>This is true if the key (ie one of its subkeys) can be used to create
data signatures.
<P>

</P>
<DT><CODE>unsigned int can_certify : 1</CODE>
<DD>This is true if the key (ie one of its subkeys) can be used to create
key certificates.
<P>

</P>
<DT><CODE>unsigned int can_authenticate : 1</CODE>
<DD>This is true if the key (ie one of its subkeys) can be used for
authentication.
<P>

</P>
<DT><CODE>unsigned int secret : 1</CODE>
<DD>This is true if the key is a secret key.
<P>

</P>
<DT><CODE>gpgme_protocol_t protocol</CODE>
<DD>This is the protocol supported by this key.
<P>

</P>
<DT><CODE>char *issuer_serial</CODE>
<DD>If <CODE>protocol</CODE> is <CODE>GPGME_PROTOCOL_CMS</CODE>, then this is the
issuer serial.
<P>

</P>
<DT><CODE>char *issuer_name</CODE>
<DD>If <CODE>protocol</CODE> is <CODE>GPGME_PROTOCOL_CMS</CODE>, then this is the
issuer name.
<P>

</P>
<DT><CODE>char *chain_id</CODE>
<DD>If <CODE>protocol</CODE> is <CODE>GPGME_PROTOCOL_CMS</CODE>, then this is the
chain ID, which can be used to built the certificate chain.
 
<DT><CODE>gpgme_validity_t owner_trust</CODE>
<DD>If <CODE>protocol</CODE> is <CODE>GPGME_PROTOCOL_OpenPGP</CODE>, then this is the
owner trust.
<P>

</P>
<DT><CODE>gpgme_sub_key_t subkeys</CODE>
<DD>This is a linked list with the subkeys of the key.  The first subkey
in the list is the primary key and usually available.
<P>

</P>
<DT><CODE>gpgme_user_id_t uids</CODE>
<DD>This is a linked list with the user IDs of the key.  The first user ID
in the list is the main (or primary) user ID.
</DL>
</DL>
<P>

<TABLE BORDER="0" CELLSPACING="0">
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gpgme_47.html#SEC47">7.4.1 Listing Keys</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Browsing the list of available keys.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gpgme_48.html#SEC48">7.4.2 Information About Keys</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Requesting detailed information about keys.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gpgme_49.html#SEC49">7.4.3 Key Signatures</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Listing the signatures on a key.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gpgme_50.html#SEC50">7.4.4 Manipulating Keys</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Operations on keys.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gpgme_51.html#SEC51">7.4.5 Generating Keys</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Creating new key pairs.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gpgme_52.html#SEC52">7.4.6 Exporting Keys</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Retrieving key data from the key ring.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gpgme_53.html#SEC53">7.4.7 Importing Keys</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Adding keys to the key ring.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gpgme_54.html#SEC54">7.4.8 Deleting Keys</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Removing keys from the key ring.</TD></TR>
</TABLE>
<P>

<A NAME="Listing Keys"></A>
<HR SIZE=1>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme_45.html#SEC45"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme_47.html#SEC47"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme_34.html#SEC34"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme_34.html#SEC34"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme_78.html#SEC78"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme_81.html#SEC81">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<BR>
<FONT SIZE="-1">
This document was generated
by <I>Igor Belyi</I> on <I>June, 7 2005</I>
using <A HREF="http://texi2html.cvshome.org"><I>texi2html</I></A>
</FONT>

</BODY>
</HTML>
