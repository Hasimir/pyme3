<html lang="en">
<head>
<title>Cancellation - The `GnuPG Made Easy' Reference Manual</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="The `GnuPG Made Easy' Reference Manual">
<meta name="generator" content="makeinfo 4.11">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Run-Control.html#Run-Control" title="Run Control">
<link rel="prev" href="Using-External-Event-Loops.html#Using-External-Event-Loops" title="Using External Event Loops">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<p>
<a name="Cancellation"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="Using-External-Event-Loops.html#Using-External-Event-Loops">Using External Event Loops</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Run-Control.html#Run-Control">Run Control</a>
<hr>
</div>

<h4 class="subsection">7.7.3 Cancellation</h4>

<p><a name="index-cryptographic-operation_002c-aborting-335"></a><a name="index-cryptographic-operation_002c-cancelling-336"></a><a name="index-aborting-operations-337"></a><a name="index-cancelling-operations-338"></a>
Sometimes you do not want to wait for an operation to finish.  If you
use external I/O callbacks, you can cancel a pending operation. 
However, you must ensure that no other thread is currently using the
context in which the operation you want to cancel runs.  This includes
callback handlers.  So your external event loop must either be halted
or otherwise it must be guaranteed that no installed I/O callbacks are
run for this context.

<div class="defun">
&mdash; Function: gpgme_ctx_t <b>gpgme_cancel</b> (<var>gpgme_ctx_t&nbsp;ctx<!-- /@w --></var>)<var><a name="index-gpgme_005fcancel-339"></a></var><br>
<blockquote><p>The function <code>gpgme_cancel</code> attempts to cancel a pending
operation in the context <var>ctx</var>.  This only works if you use the
global event loop or your own event loop.

        <p>If you use the global event loop, you must not call <code>gpgme_wait</code>
or <code>gpgme_wait</code> during cancellation.  After successful
cancellation, you can call <code>gpgme_wait</code> (optionally waiting on
<var>ctx</var>), and the context <var>ctx</var> will appear as if it had
finished with the error code <code>GPG_ERR_CANCEL</code>.

        <p>If you use your an external event loop, you must ensure that no I/O
callbacks are invoked for this context (for example by halting the
event loop).  On successful cancellation, all registered I/O callbacks
for this context will be unregistered, and a <code>GPGME_EVENT_DONE</code>
event with the error code <code>GPG_ERR_CANCEL</code> will be signaled.

        <p>The function returns an error code if the cancellation failed (in this
case the state of <var>ctx</var> is not modified). 
</p></blockquote></div>

   </body></html>

