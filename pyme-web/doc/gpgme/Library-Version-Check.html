<html lang="en">
<head>
<title>Library Version Check - The `GnuPG Made Easy' Reference Manual</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="The `GnuPG Made Easy' Reference Manual">
<meta name="generator" content="makeinfo 4.11">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Preparation.html#Preparation" title="Preparation">
<link rel="prev" href="Using-Libtool.html#Using-Libtool" title="Using Libtool">
<link rel="next" href="Signal-Handling.html#Signal-Handling" title="Signal Handling">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<p>
<a name="Library-Version-Check"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="Signal-Handling.html#Signal-Handling">Signal Handling</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Using-Libtool.html#Using-Libtool">Using Libtool</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Preparation.html#Preparation">Preparation</a>
<hr>
</div>

<h3 class="section">2.6 Library Version Check</h3>

<p><a name="index-version-check_002c-of-the-library-13"></a>

<div class="defun">
&mdash; Function: const char * <b>gpgme_check_version</b> (<var>const&nbsp;char&nbsp;*required_version<!-- /@w --></var>)<var><a name="index-gpgme_005fcheck_005fversion-14"></a></var><br>
<blockquote><p>The function <code>gpgme_check_version</code> has three purposes.  It can be
used to retrieve the version number of the library.  In addition it
can verify that the version number is higher than a certain required
version number.  In either case, the function initializes some
sub-systems, and for this reason alone it must be invoked early in
your program, before you make use of the other functions in
<acronym>GPGME</acronym>.

        <p>As a side effect for W32 based systems, the socket layer will get
initialized.

        <p>If <var>required_version</var> is <code>NULL</code>, the function returns a
pointer to a statically allocated string containing the version number
of the library.

        <p>If <var>required_version</var> is not <code>NULL</code>, it should point to a
string containing a version number, and the function checks that the
version of the library is at least as high as the version number
provided.  In this case, the function returns a pointer to a
statically allocated string containing the version number of the
library.  If <var>REQUIRED_VERSION</var> is not a valid version number, or
if the version requirement is not met, the function returns
<code>NULL</code>.

        <p>If you use a version of a library that is backwards compatible with
older releases, but contains additional interfaces which your program
uses, this function provides a run-time check if the necessary
features are provided by the installed version of the library. 
</p></blockquote></div>

   <p>After initializing <acronym>GPGME</acronym>, you should set the locale
information to the locale required for your output terminal.  This
locale information is needed for example for the curses and Gtk
pinentry.  Here is an example of a complete initialization:

<pre class="example">     #include &lt;locale.h&gt;
     #include &lt;gpgme.h&gt;
     
     void
     init_program (void)
     {
       /* Initialize the locale environment.  */
       setlocale (LC_ALL, "");
       gpgme_check_version (NULL);
       gpgme_set_locale (NULL, LC_CTYPE, setlocale (LC_CTYPE, NULL));
     #ifdef LC_MESSAGES
       gpgme_set_locale (NULL, LC_MESSAGES, setlocale (LC_MESSAGES, NULL));
     #endif
     }
</pre>
   <p>Note that you are highly recommended to initialize the locale settings
like this.  <acronym>GPGME</acronym> can not do this for you because it would
not be thread safe.  The conditional on LC_MESSAGES is only necessary
for portability to W32 systems.

   </body></html>

