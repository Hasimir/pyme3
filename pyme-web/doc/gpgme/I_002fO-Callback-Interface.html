<html lang="en">
<head>
<title>I/O Callback Interface - The `GnuPG Made Easy' Reference Manual</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="The `GnuPG Made Easy' Reference Manual">
<meta name="generator" content="makeinfo 4.11">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Using-External-Event-Loops.html#Using-External-Event-Loops" title="Using External Event Loops">
<link rel="next" href="Registering-I_002fO-Callbacks.html#Registering-I_002fO-Callbacks" title="Registering I/O Callbacks">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<p>
<a name="I%2fO-Callback-Interface"></a>
<a name="I_002fO-Callback-Interface"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="Registering-I_002fO-Callbacks.html#Registering-I_002fO-Callbacks">Registering I/O Callbacks</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Using-External-Event-Loops.html#Using-External-Event-Loops">Using External Event Loops</a>
<hr>
</div>

<h5 class="subsubsection">7.7.2.1 I/O Callback Interface</h5>

<div class="defun">
&mdash; Data type: <b>gpgme_error_t (*gpgme_io_cb_t) (void&nbsp;*</b><var>data</var><b><!-- /@w -->, int&nbsp;</b><var>fd</var><b><!-- /@w -->)</b><var><a name="index-gpgme_005ferror_005ft-_0028_002agpgme_005fio_005fcb_005ft_0029-_0028_0040w_007bvoid-_002a_0040var_007bdata_007d_007d_002c-_0040w_007bint-_0040var_007bfd_007d_007d_0029-320"></a></var><br>
<blockquote><p><a name="index-gpgme_005fio_005fcb_005ft-321"></a>The <code>gpgme_io_cb_t</code> type is the type of functions which
<acronym>GPGME</acronym> wants to register as I/O callback handlers using the
<code>gpgme_register_io_cb_t</code> functions provided by the user.

        <p><var>data</var> and <var>fd</var> are provided by <acronym>GPGME</acronym> when the I/O
callback handler is registered, and should be passed through to the
handler when it is invoked by the user because it noticed activity on
the file descriptor <var>fd</var>.

        <p>The callback handler always returns <code>0</code>, but you should consider
the return value to be reserved for later use. 
</p></blockquote></div>

<div class="defun">
&mdash; Data type: <b>gpgme_error_t (*gpgme_register_io_cb_t) (void&nbsp;*</b><var>data</var><b><!-- /@w -->, int&nbsp;</b><var>fd</var><b><!-- /@w -->, int&nbsp;</b><var>dir</var><b><!-- /@w -->, gpgme_io_cb_t&nbsp;</b><var>fnc</var><b><!-- /@w -->, void&nbsp;*</b><var>fnc_data</var><b><!-- /@w -->, void&nbsp;**</b><var>tag</var><b><!-- /@w -->)</b><var><a name="index-gpgme_005ferror_005ft-_0028_002agpgme_005fregister_005fio_005fcb_005ft_0029-_0028_0040w_007bvoid-_002a_0040var_007bdata_007d_007d_002c-_0040w_007bint-_0040var_007bfd_007d_007d_002c-_0040w_007bint-_0040var_007bdir_007d_007d_002c-_0040w_007bgpgme_005fio_005fcb_005ft-_0040var_007bfnc_007d_007d_002c-_0040w_007bvoid-_002a_0040var_007bfnc_005fdata_007d_007d_002c-_0040w_007bvoid-_002a_002a_0040var_007btag_007d_007d_0029-322"></a></var><br>
<blockquote><p><a name="index-gpgme_005fregister_005fio_005fcb_005ft-323"></a>The <code>gpgme_register_io_cb_t</code> type is the type of functions which can
be called by <acronym>GPGME</acronym> to register an I/O callback function
<var>fnc</var> for the file descriptor <var>fd</var> with the user. 
<var>fnc_data</var> should be passed as the first argument to <var>fnc</var>
when the handler is invoked (the second argument should be <var>fd</var>). 
If <var>dir</var> is 0, <var>fnc</var> should be called by the user when
<var>fd</var> is ready for writing.  If <var>dir</var> is 1, <var>fnc</var> should be
called when <var>fd</var> is ready for reading.

        <p><var>data</var> was provided by the user when registering the
<code>gpgme_register_io_cb_t</code> function with <acronym>GPGME</acronym> and will always
be passed as the first argument when registering a callback function. 
For example, the user can use this to determine the event loop to
which the file descriptor should be added.

        <p><acronym>GPGME</acronym> will call this function when a crypto operation is
initiated in a context for which the user has registered I/O callback
handler functions with <code>gpgme_set_io_cbs</code>.  It can also call this
function when it is in an I/O callback handler for a file descriptor
associated to this context.

        <p>The user should return a unique handle in <var>tag</var> identifying this
I/O callback registration, which will be passed to the
<code>gpgme_register_io_cb_t</code> function without interpretation when the file
descriptor should not be monitored anymore. 
</p></blockquote></div>

<div class="defun">
&mdash; Data type: <b>void (*gpgme_remove_io_cb_t) (void&nbsp;*</b><var>tag</var><b><!-- /@w -->)</b><var><a name="index-void-_0028_002agpgme_005fremove_005fio_005fcb_005ft_0029-_0028_0040w_007bvoid-_002a_0040var_007btag_007d_007d_0029-324"></a></var><br>
<blockquote><p>The <code>gpgme_remove_io_cb_t</code> type is the type of functions which can be
called by <acronym>GPGME</acronym> to remove an I/O callback handler that was
registered before.  <var>tag</var> is the handle that was returned by the
<code>gpgme_register_io_cb_t</code> for this I/O callback.

        <p><acronym>GPGME</acronym> can call this function when a crypto operation is in
an I/O callback.  It will also call this function when the context is
destroyed while an operation is pending. 
</p></blockquote></div>

<div class="defun">
&mdash; Data type: <b>enum gpgme_event_io_t</b><var><a name="index-enum-gpgme_005fevent_005fio_005ft-325"></a></var><br>
<blockquote><p><a name="index-gpgme_005fevent_005fio_005ft-326"></a>The <code>gpgme_event_io_t</code> type specifies the type of an event that is
reported to the user by <acronym>GPGME</acronym> as a consequence of an I/O
operation.  The following events are defined:

          <dl>
<dt><code>GPGME_EVENT_START</code><dd>The operation is fully initialized now, and you can start to run the
registered I/O callback handlers now.  Note that registered I/O
callback handlers must not be run before this event is signalled. 
<var>type_data</var> is <code>NULL</code> and reserved for later use.

          <br><dt><code>GPGME_EVENT_DONE</code><dd>The operation is finished, the last I/O callback for this operation
was removed.  The accompanying <var>type_data</var> points to a
<code>gpgme_error_t</code> variable that contains the status of the operation
that finished.  This event is signalled after the last I/O callback
has been removed.

          <br><dt><code>GPGME_EVENT_NEXT_KEY</code><dd>In a <code>gpgme_op_keylist_start</code> operation, the next key was
received from the crypto engine.  The accompanying <var>type_data</var> is
a <code>gpgme_key_t</code> variable that contains the key with one reference
for the user.

          <br><dt><code>GPGME_EVENT_NEXT_TRUSTITEM</code><dd>In a <code>gpgme_op_trustlist_start</code> operation, the next trust item
was received from the crypto engine.  The accompanying <var>type_data</var>
is a <code>gpgme_trust_item_t</code> variable that contains the trust item with
one reference for the user. 
</dl>
        </p></blockquote></div>

<div class="defun">
&mdash; Data type: <b>void (*gpgme_event_io_cb_t) (void&nbsp;*</b><var>data</var><b><!-- /@w -->, gpgme_event_io_t&nbsp;</b><var>type</var><b><!-- /@w -->, void&nbsp;*</b><var>type_data</var><b><!-- /@w -->)</b><var><a name="index-void-_0028_002agpgme_005fevent_005fio_005fcb_005ft_0029-_0028_0040w_007bvoid-_002a_0040var_007bdata_007d_007d_002c-_0040w_007bgpgme_005fevent_005fio_005ft-_0040var_007btype_007d_007d_002c-_0040w_007bvoid-_002a_0040var_007btype_005fdata_007d_007d_0029-327"></a></var><br>
<blockquote><p>The <code>gpgme_event_io_cb_t</code> type is the type of functions which can be
called by <acronym>GPGME</acronym> to signal an event for an operation running
in a context which has I/O callback functions registered by the user.

        <p><var>data</var> was provided by the user when registering the
<code>gpgme_event_io_cb_t</code> function with <acronym>GPGME</acronym> and will always be
passed as the first argument when registering a callback function. 
For example, the user can use this to determine the context in which
this event has occured.

        <p><var>type</var> will specify the type of event that has occured. 
<var>type_data</var> specifies the event further, as described in the above
list of possible <code>gpgme_event_io_t</code> types.

        <p><acronym>GPGME</acronym> can call this function in an I/O callback handler. 
</p></blockquote></div>

   </body></html>

