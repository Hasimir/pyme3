<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/html40/loose.dtd">
<HTML>
<!-- Created on June, 7 2005 by texi2html 1.66 -->
<!--
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people <dev@texi2html.cvshome.org>
Send bugs and suggestions to <users@texi2html.cvshome.org>

-->
<HEAD>
<TITLE>The `GnuPG Made Easy' Reference Manual: Memory Based Data Buffers</TITLE>

<META NAME="description" CONTENT="The `GnuPG Made Easy' Reference Manual: Memory Based Data Buffers">
<META NAME="keywords" CONTENT="The `GnuPG Made Easy' Reference Manual: Memory Based Data Buffers">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.66">

</HEAD>

<BODY LANG="en" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<A NAME="SEC29"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme_28.html#SEC28"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme_30.html#SEC30"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme_27.html#SEC27"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme_28.html#SEC28"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme_34.html#SEC34"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme_81.html#SEC81">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<HR SIZE=1>
<H3> 6.1.1 Memory Based Data Buffers </H3>
<!--docid::SEC29::-->
<P>

Memory based data objects store all data in allocated memory.  This is
convenient, but only practical for an amount of data that is a
fraction of the available physical memory.  The data has to be copied
from its source and to its destination, which can often be avoided by
using one of the other data object 
</P>
<P>

<A NAME="IDX33"></A>
</P>
<DL>
<DT><U>Function:</U> gpgme_error_t <B>gpgme_data_new</B> <I>(gpgme_data_t *<VAR>dh</VAR>)</I>
<DD>The function <CODE>gpgme_data_new</CODE> creates a new <CODE>gpgme_data_t</CODE>
object and returns a handle for it in <VAR>dh</VAR>.  The data object is
memory based and initially empty.
<P>

The function returns the error code <CODE>GPG_ERR_NO_ERROR</CODE> if the
data object was successfully created, <CODE>GPG_ERR_INV_VALUE</CODE> if
<VAR>dh</VAR> is not a valid pointer, and <CODE>GPG_ERR_ENOMEM</CODE> if not
enough memory is available.
</P>
</DL>
<P>

<A NAME="IDX34"></A>
</P>
<DL>
<DT><U>Function:</U> gpgme_error_t <B>gpgme_data_new_from_mem</B> <I>(gpgme_data_t *<VAR>dh</VAR>, const char *<VAR>buffer</VAR>, size_t <VAR>size</VAR>, int <VAR>copy</VAR>)</I>
<DD>The function <CODE>gpgme_data_new_from_mem</CODE> creates a new
<CODE>gpgme_data_t</CODE> object and fills it with <VAR>size</VAR> bytes starting
from <VAR>buffer</VAR>.
<P>

If <VAR>copy</VAR> is not zero, a private copy of the data is made.  If
<VAR>copy</VAR> is zero, the data is taken from the specified buffer as
needed, and the user has to ensure that the buffer remains valid for
the whole life span of the data object.
</P>
<P>

The function returns the error code <CODE>GPG_ERR_NO_ERROR</CODE> if the
data object was successfully created, <CODE>GPG_ERR_INV_VALUE</CODE> if
<VAR>dh</VAR> or <VAR>buffer</VAR> is not a valid pointer, and
<CODE>GPG_ERR_ENOMEM</CODE> if not enough memory is available.
</P>
</DL>
<P>

<A NAME="IDX35"></A>
</P>
<DL>
<DT><U>Function:</U> gpgme_error_t <B>gpgme_data_new_from_file</B> <I>(gpgme_data_t *<VAR>dh</VAR>, const char *<VAR>filename</VAR>, int <VAR>copy</VAR>)</I>
<DD>The function <CODE>gpgme_data_new_from_file</CODE> creates a new
<CODE>gpgme_data_t</CODE> object and fills it with the content of the file
<VAR>filename</VAR>.
<P>

If <VAR>copy</VAR> is not zero, the whole file is read in at initialization
time and the file is not used anymore after that.  This is the only
mode supported currently.  Later, a value of zero for <VAR>copy</VAR> might
cause all reads to be delayed until the data is needed, but this is
not yet implemented.
</P>
<P>

The function returns the error code <CODE>GPG_ERR_NO_ERROR</CODE> if the
data object was successfully created, <CODE>GPG_ERR_INV_VALUE</CODE> if
<VAR>dh</VAR> or <VAR>filename</VAR> is not a valid pointer,
<CODE>GPG_ERR_NOT_IMPLEMENTED</CODE> if <VAR>code</VAR> is zero, and
<CODE>GPG_ERR_ENOMEM</CODE> if not enough memory is available.
</P>
</DL>
<P>

<A NAME="IDX36"></A>
</P>
<DL>
<DT><U>Function:</U> gpgme_error_t <B>gpgme_data_new_from_filepart</B> <I>(gpgme_data_t *<VAR>dh</VAR>, const char *<VAR>filename</VAR>, FILE *<VAR>fp</VAR>, off_t <VAR>offset</VAR>, size_t <VAR>length</VAR>)</I>
<DD>The function <CODE>gpgme_data_new_from_filepart</CODE> creates a new
<CODE>gpgme_data_t</CODE> object and fills it with a part of the file specified
by <VAR>filename</VAR> or <VAR>fp</VAR>.
<P>

Exactly one of <VAR>filename</VAR> and <VAR>fp</VAR> must be non-zero, the other
must be zero.  The argument that is not zero specifies the file from
which <VAR>length</VAR> bytes are read into the data object, starting from
<VAR>offset</VAR>.
</P>
<P>

The function returns the error code <CODE>GPG_ERR_NO_ERROR</CODE> if the
data object was successfully created, <CODE>GPG_ERR_INV_VALUE</CODE> if
<VAR>dh</VAR> and exactly one of <VAR>filename</VAR> and <VAR>fp</VAR> is not a valid
pointer, and <CODE>GPG_ERR_ENOMEM</CODE> if not enough memory is available.
</P>
</DL>
<P>

<A NAME="File Based Data Buffers"></A>
<HR SIZE=1>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme_28.html#SEC28"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme_30.html#SEC30"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme_27.html#SEC27"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme_28.html#SEC28"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme_34.html#SEC34"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme_81.html#SEC81">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gpgme_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<BR>
<FONT SIZE="-1">
This document was generated
by <I>Igor Belyi</I> on <I>June, 7 2005</I>
using <A HREF="http://texi2html.cvshome.org"><I>texi2html</I></A>
</FONT>

</BODY>
</HTML>
